<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Jeremy Gelb" />

<meta name="date" content="2022-04-23" />

<title>Calculating isochrones</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Calculating isochrones</h1>
<h4 class="author">Jeremy Gelb</h4>
<h4 class="date">2022-04-23</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>An isochrone is a geometrical representation of the area that can be reached for a starting on a network within a given distance (in time or space units).</p>
<p>There are already several libraries to build isochrones with R (<code>opentripplanner</code>, <code>osrm</code>, <code>rmapzen</code>, etc.), but they are all based on OpenStreetMap data or on external API. We propose here a simple implementation that can be used on a geographical network read as <em>SpatialLinesDataFrame</em>.</p>
<p>We give here a simple example with the Montreal network dataset and calculate several isochrones from the centre of the dataset.</p>
</div>
<div id="calculating-the-isochrones" class="section level1">
<h1>calculating the isochrones</h1>
<p>The first step is to load (or create) a geographical network and to have some starting points.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first load data and packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spNetwork)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtl_network)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating the length of each segment</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>mtl_network<span class="sc">$</span>length <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">st_length</span>(mtl_network))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># extracting the coordinates in one matrix</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(mtl_network)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>center <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(coords)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>df_center <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;OID&quot;</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;x&quot;</span> <span class="ot">=</span> center[<span class="dv">1</span>],</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;y&quot;</span> <span class="ot">=</span> center[<span class="dv">2</span>])</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>df_center <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(df_center, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>,<span class="st">&quot;y&quot;</span>), <span class="at">crs =</span> <span class="fu">st_crs</span>(mtl_network))</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># then plotting the data</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mtl_network) <span class="sc">+</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="st">&quot;black&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df_center) <span class="sc">+</span> </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The second step is to calculate the isochrones with the function <code>calc_isochrones</code>. In this example, we use the length of a segment as the weight but other values could be used. We also consider that all the roads can be used in both directions (see parameter <code>direction</code>)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>iso_results <span class="ot">&lt;-</span> <span class="fu">calc_isochrones</span>(<span class="at">lines =</span> mtl_network,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">start_points =</span> df_center,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">dists =</span> <span class="fu">c</span>(<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">2000</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">weight =</span> <span class="st">&quot;length&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                               )</span></code></pre></div>
<p>The results are reported as lines, which can be mapped.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a factor and changing order for better vizualisation</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>iso_results<span class="sc">$</span>fac_dist <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(iso_results<span class="sc">$</span>distance)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>iso_results <span class="ot">&lt;-</span> iso_results[<span class="fu">order</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>iso_results<span class="sc">$</span>distance),]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(mtl_network) <span class="sc">+</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(iso_results) <span class="sc">+</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;fac_dist&quot;</span>,<span class="at">title.col =</span> <span class="st">&quot;distance (m)&quot;</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;500&quot;</span><span class="ot">=</span><span class="st">&quot;#005f73&quot;</span>, <span class="st">&quot;1000&quot;</span><span class="ot">=</span><span class="st">&quot;#ca6702&quot;</span>, <span class="st">&quot;2000&quot;</span><span class="ot">=</span><span class="st">&quot;#9b2226&quot;</span>))<span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df_center) <span class="sc">+</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="from-lines-to-polygons" class="section level1">
<h1>From lines to polygons</h1>
<p>The lines are the most exact form of an isochrone because they depict exactly what parts of the network can be reached. However, isochrones are represented as polygons most of the time. We propose here some approaches to build some meaningful polygons for isochrones.</p>
<p>The best starting point is probably to calculate for each set of points a concave hull. This is different from the traditional convex hull and is more adapted to the irregular geometry of an isochrone. To do so, we use the library <code>concaveman</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(concaveman)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># identifying each isochrone</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>iso_results<span class="sc">$</span>iso_oid <span class="ot">&lt;-</span> <span class="fu">paste</span>(iso_results<span class="sc">$</span>point_id,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                             iso_results<span class="sc">$</span>distance,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># creating the polygons for each isochrone</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>polygons <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">unique</span>(iso_results<span class="sc">$</span>iso_oid), <span class="cf">function</span>(oid){</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># subseting the required lines</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  lines <span class="ot">&lt;-</span> <span class="fu">subset</span>(iso_results, iso_results<span class="sc">$</span>iso_oid <span class="sc">==</span> oid)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extracting the coordinates of the lines</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(lines)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  poly_coords <span class="ot">&lt;-</span> <span class="fu">concaveman</span>(<span class="at">points =</span> coords, <span class="at">concavity =</span> <span class="dv">3</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  poly <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>(<span class="fu">list</span>(poly_coords[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]))</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(poly)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a SpatialPolygonsDataFrame</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>iso_sp <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">iso_oid =</span> <span class="fu">unique</span>(iso_results<span class="sc">$</span>iso_oid),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">distance =</span> <span class="fu">unique</span>(iso_results<span class="sc">$</span>distance),</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">geometry =</span> polygons,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">crs =</span> <span class="fu">st_crs</span>(iso_results)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>We can now map the obtained polygons.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a factor and changing order for better vizualisation</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>iso_sp<span class="sc">$</span>fac_dist <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(iso_sp<span class="sc">$</span>distance)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>iso_sp <span class="ot">&lt;-</span> iso_sp[<span class="fu">order</span>(<span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>iso_sp<span class="sc">$</span>distance),]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(iso_results) <span class="sc">+</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(iso_sp) <span class="sc">+</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;fac_dist&quot;</span>,<span class="at">title.col =</span> <span class="st">&quot;distance (m)&quot;</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;500&quot;</span><span class="ot">=</span><span class="st">&quot;#005f73&quot;</span>, <span class="st">&quot;1000&quot;</span><span class="ot">=</span><span class="st">&quot;#ca6702&quot;</span>, <span class="st">&quot;2000&quot;</span><span class="ot">=</span><span class="st">&quot;#9b2226&quot;</span>),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">border.col =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df_center) <span class="sc">+</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>This is more similar to classical isochrone maps. Another possible enhancement would be to simplify and smooth the limits of the polygons. To do so, we will use the functions <code>st_simplify</code> from <code>sf</code> and <code>smooth</code> from <code>smoothr</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(smoothr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>simple_polygons <span class="ot">&lt;-</span> <span class="fu">st_simplify</span>(iso_sp, <span class="at">dTolerance =</span> <span class="dv">50</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>smooth_iso <span class="ot">&lt;-</span> <span class="fu">smooth</span>(simple_polygons, <span class="at">method =</span> <span class="st">&quot;chaikin&quot;</span>, </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">refinements =</span> <span class="dv">5</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(iso_results) <span class="sc">+</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>)<span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(smooth_iso) <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;fac_dist&quot;</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">title.col =</span> <span class="st">&quot;distance (m)&quot;</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">&quot;500&quot;</span><span class="ot">=</span><span class="st">&quot;#005f73&quot;</span>, <span class="st">&quot;1000&quot;</span><span class="ot">=</span><span class="st">&quot;#ca6702&quot;</span>, <span class="st">&quot;2000&quot;</span><span class="ot">=</span><span class="st">&quot;#9b2226&quot;</span>),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">border.col =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(df_center) <span class="sc">+</span> </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span> </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The shapes are cleaner for mapping but the results are not exact anymore.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
