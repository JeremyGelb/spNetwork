<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Isochrones calculation — calc_isochrones • spNetwork</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Isochrones calculation — calc_isochrones"><meta property="og:description" content="Calculate isochrones on a network"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spNetwork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/web_vignettes/AdaptiveBW.html">K-nearest neighbour adaptive bandwidth</a>
    </li>
    <li>
      <a href="../articles/web_vignettes/Isochrones.html">Calculating isochrones</a>
    </li>
    <li>
      <a href="../articles/KNetworkFunctions.html">Network k Functions</a>
    </li>
    <li>
      <a href="../articles/NetworkBuilding.html">Building graphs</a>
    </li>
    <li>
      <a href="../articles/NKDE.html">Network Kernel Density Estimate</a>
    </li>
    <li>
      <a href="../articles/web_vignettes/NKDEdetailed.html">Details about NKDE</a>
    </li>
    <li>
      <a href="../articles/web_vignettes/SpaceTimeDBscan.html">Spatio-temporal dbscan with network distance</a>
    </li>
    <li>
      <a href="../articles/SpatialWeightMatrices.html">Spatial Weight Matrices</a>
    </li>
    <li>
      <a href="../articles/web_vignettes/SpeedVSprecision.html">Analysing the impact of max_dept parameter for continuous NKDE</a>
    </li>
    <li>
      <a href="../articles/TNKDE.html">Temporal Network Kernel Density Estimate</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/JeremyGelb/spNetwork/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Isochrones calculation</h1>
    <small class="dont-index">Source: <a href="https://github.com/JeremyGelb/spNetwork/blob/HEAD/R/isochrones_sf.R" class="external-link"><code>R/isochrones_sf.R</code></a></small>
    <div class="hidden name"><code>calc_isochrones.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate isochrones on a network</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_isochrones</span><span class="op">(</span></span>
<span>  <span class="va">lines</span>,</span>
<span>  <span class="va">dists</span>,</span>
<span>  <span class="va">start_points</span>,</span>
<span>  donught <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mindist <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  weight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  direction <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>lines</dt>
<dd><p>A feature collection of lines representing the edges of the network</p></dd>


<dt>dists</dt>
<dd><p>A vector of the size of the desired isochrones. Can also be a list of vector
when each start point must have its own distances. If so, the length of the list must be equal
to the number of rows in start_points.</p></dd>


<dt>start_points</dt>
<dd><p>A feature collection of points representing the starting
points if the isochrones</p></dd>


<dt>donught</dt>
<dd><p>A boolean indicating if the returned lines must overlap for
each distance (FALSE, default) or if the lines must be cut between each
distance step (TRUE).</p></dd>


<dt>mindist</dt>
<dd><p>The minimum distance between two points. When two points are
too close, they might end up snapped at the same location on a line.
Default is 1.</p></dd>


<dt>weight</dt>
<dd><p>The name of the column in lines to use an edge weight. If NULL,
the geographical length is used. Note that if lines are split during the
network creation, the weight column is recalculated proportionally to the new lines
length.</p></dd>


<dt>direction</dt>
<dd><p>The name of the column indicating authorized
travelling direction on lines. if NULL, then all lines can be used in both
directions (undirected). The values of the column must be "FT" (From - To),
"TF" (To - From) or "Both".</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A feature collection of lines representing the isochrones with the
following columns</p><ul><li><p>point_id: the index of the point at the centre of the isochrone;</p></li>
<li><p>distance: the size of the isochrone</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>An isochrone is the set of reachable lines around a node in a network within
a specified distance (or time). This function perform dynamic segmentation to return the
part of the edges reached and not only the fully covered edges. Several start points and
several distances can be given. The network can also be directed. The lines returned
by the function are the most accurate representation of the isochrones. However, if
polygons are required for mapping, the vignette "Calculating isochrones" shows
how to create smooth polygons from the returned sets of lines.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co"># creating a simple network</span></span>
<span><span class="va">wkt_lines</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"LINESTRING (0.0 0.0, 5.0 0.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (0.0 -5.0, 5.0 -5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (5.0 0.0, 5.0 5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (5.0 -5.0, 5.0 -10.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (5.0 0.0, 5.0 -5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (5.0 0.0, 10.0 0.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (5.0 -5.0, 10.0 -5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (10.0 0, 10.0 -5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (10.0 -10.0, 10.0 -5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (15.0 -5.0, 10.0 -5.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (10.0 0.0, 15.0 0.0)"</span>,</span>
<span>  <span class="st">"LINESTRING (10.0 0.0, 10.0 5.0)"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">linesdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>wkt <span class="op">=</span> <span class="va">wkt_lines</span>,</span>
<span>                      id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"l"</span>,<span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">wkt_lines</span><span class="op">)</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lines</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">linesdf</span>, wkt <span class="op">=</span> <span class="st">"wkt"</span>, crs <span class="op">=</span> <span class="fl">32188</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and the definition of the starting point</span></span>
<span><span class="va">start_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>                           y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">start_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">start_points</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">32188</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># setting the directions</span></span>
<span></span>
<span><span class="va">lines</span><span class="op">$</span><span class="va">direction</span> <span class="op">&lt;-</span> <span class="st">"Both"</span></span>
<span><span class="va">lines</span><span class="op">[</span><span class="fl">6</span>,<span class="st">"direction"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"TF"</span></span>
<span></span>
<span><span class="va">isochrones</span> <span class="op">&lt;-</span> <span class="fu">calc_isochrones</span><span class="op">(</span><span class="va">lines</span>,dists <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">12</span><span class="op">)</span>,</span>
<span>                              donught <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              start_points <span class="op">=</span> <span class="va">start_points</span>,</span>
<span>                              direction <span class="op">=</span> <span class="st">"direction"</span><span class="op">)</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jeremy Gelb.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

