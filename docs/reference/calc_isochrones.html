<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Isochrones calculation — calc_isochrones • spNetwork</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Isochrones calculation — calc_isochrones" />
<meta property="og:description" content="Calculate isochrones on a network" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spNetwork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Isochrones.html">Calculating isochrones</a>
    </li>
    <li>
      <a href="../articles/KNetworkFunctions.html">Network k Functions</a>
    </li>
    <li>
      <a href="../articles/NetworkBuilding.html">Building graphs</a>
    </li>
    <li>
      <a href="../articles/NKDE.html">Network Kernel Density Estimate</a>
    </li>
    <li>
      <a href="../articles/NKDEdetailed.html">Details about NKDE</a>
    </li>
    <li>
      <a href="../articles/SpatialWeightMatrices.html">Spatial Weight Matrices</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JeremyGelb/spNetwork/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Isochrones calculation</h1>
    <small class="dont-index">Source: <a href='https://github.com/JeremyGelb/spNetwork/blob/master/R/isochrones.R'><code>R/isochrones.R</code></a></small>
    <div class="hidden name"><code>calc_isochrones.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate isochrones on a network</p>
    </div>

    <pre class="usage"><span class='fu'>calc_isochrones</span><span class='op'>(</span>
  <span class='va'>lines</span>,
  <span class='va'>dists</span>,
  <span class='va'>start_points</span>,
  mindist <span class='op'>=</span> <span class='fl'>1</span>,
  weight <span class='op'>=</span> <span class='cn'>NULL</span>,
  direction <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>lines</th>
      <td><p>A SpatialLinesDataFrame representing the edges of the network</p></td>
    </tr>
    <tr>
      <th>dists</th>
      <td><p>A vector of the size of the desired isochrones</p></td>
    </tr>
    <tr>
      <th>start_points</th>
      <td><p>A SpatialPointsDataFrame representing the starting
points if the isochrones</p></td>
    </tr>
    <tr>
      <th>mindist</th>
      <td><p>The minimum distance between two points. When two points are
too close, they might end up snapped at the same location on a line.
Default is 1.</p></td>
    </tr>
    <tr>
      <th>weight</th>
      <td><p>The name of the column in lines to use a edge weight. If NULL,
the geographical length is used. Note that if lines are split during the
network creation, the weight column is recalculated proportionally to the new lines
length.</p></td>
    </tr>
    <tr>
      <th>direction</th>
      <td><p>The name of the column indicating authorized
traveling direction on lines. if NULL, then all lines can be used in both
directions (undirected). The values of the column must be "FT" (From - To),
"TF" (To - From) or "Both".</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A SpatialLinesDataFrame representing the isochrones with the
following columns</p><ul>
<li><p>point_id: the index of the point at the centre of the isochrone</p></li>
<li><p>distance: the size of the isochrone</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>An isochrones is the set of reachable lines around a node in a network within
a specified distance (or time). This function perform dynamic segmentation to return the
part of the edges reached and not only the fully covered edges. Several start points and
several distances can be given. The network can also be directed. The lines returned
by the function are the most accurate representation of the isochrones. However, if
polygons are required for mapping, the vignette "Calculating isochrones" shows
how to create smooth polygons from the returned sets of lines.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/edzer/sp/'>sp</a></span><span class='op'>)</span>
<span class='co'># creating a simple network</span>
<span class='va'>wkt_lines</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
 <span class='st'>"LINESTRING (0.0 0.0, 5.0 0.0)"</span>,
 <span class='st'>"LINESTRING (0.0 -5.0, 5.0 -5.0)"</span>,
 <span class='st'>"LINESTRING (5.0 0.0, 5.0 5.0)"</span>,
 <span class='st'>"LINESTRING (5.0 -5.0, 5.0 -10.0)"</span>,
 <span class='st'>"LINESTRING (5.0 0.0, 5.0 -5.0)"</span>,
 <span class='st'>"LINESTRING (5.0 0.0, 10.0 0.0)"</span>,
 <span class='st'>"LINESTRING (5.0 -5.0, 10.0 -5.0)"</span>,
 <span class='st'>"LINESTRING (10.0 0, 10.0 -5.0)"</span>,
 <span class='st'>"LINESTRING (10.0 -10.0, 10.0 -5.0)"</span>,
 <span class='st'>"LINESTRING (15.0 -5.0, 10.0 -5.0)"</span>,
 <span class='st'>"LINESTRING (10.0 0.0, 15.0 0.0)"</span>,
 <span class='st'>"LINESTRING (10.0 0.0, 10.0 5.0)"</span><span class='op'>)</span>

<span class='va'>linesdf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>wkt <span class='op'>=</span> <span class='va'>wkt_lines</span>,
                     id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"l"</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>wkt_lines</span><span class='op'>)</span>,sep<span class='op'>=</span><span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>geoms</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>rbind</span>,<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>linesdf</span><span class='op'>)</span>,<span class='kw'>function</span><span class='op'>(</span><span class='va'>i</span><span class='op'>)</span><span class='op'>{</span>
 <span class='va'>txt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>linesdf</span><span class='op'>[</span><span class='va'>i</span>,<span class='op'>]</span><span class='op'>$</span><span class='va'>wkt</span><span class='op'>)</span>
 <span class='va'>geom</span> <span class='op'>&lt;-</span> <span class='fu'>rgeos</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rgeos/man/wkt-functions.html'>readWKT</a></span><span class='op'>(</span><span class='va'>txt</span>,id<span class='op'>=</span><span class='va'>i</span><span class='op'>)</span>
 <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>geom</span><span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>lines</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/sp/man/SpatialLines.html'>SpatialLinesDataFrame</a></span><span class='op'>(</span><span class='va'>geoms</span>, <span class='va'>linesdf</span>, match.ID <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># and the definition of the starting point</span>
<span class='va'>start_points</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>)</span>,
                          y<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>2.5</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/sp/man/coordinates.html'>coordinates</a></span><span class='op'>(</span><span class='va'>start_points</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>start_points</span><span class='op'>$</span><span class='va'>x</span>,<span class='va'>start_points</span><span class='op'>$</span><span class='va'>y</span><span class='op'>)</span>

<span class='co'># setting the directions</span>

<span class='va'>lines</span><span class='op'>$</span><span class='va'>direction</span> <span class='op'>&lt;-</span> <span class='st'>"Both"</span>
<span class='va'>lines</span><span class='op'>[</span><span class='fl'>6</span>,<span class='st'>"direction"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"TF"</span>

<span class='va'>isochrones</span> <span class='op'>&lt;-</span> <span class='fu'>calc_isochrones</span><span class='op'>(</span><span class='va'>lines</span>, dists <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>,<span class='fl'>12</span><span class='op'>)</span>,
                             start_points <span class='op'>=</span> <span class='va'>start_points</span>,
                             direction <span class='op'>=</span> <span class='st'>"direction"</span><span class='op'>)</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jeremy Gelb.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


