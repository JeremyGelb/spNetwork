<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Network cross k and g functions (maturing) — cross_kfunctions • spNetwork</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Network cross k and g functions (maturing) — cross_kfunctions" />
<meta property="og:description" content="Calculate the cross k and g functions for a set of points on a
  network. (maturing)" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spNetwork</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Isochrones.html">Calculating isochrones</a>
    </li>
    <li>
      <a href="../articles/KNetworkFunctions.html">Network k Functions</a>
    </li>
    <li>
      <a href="../articles/NetworkBuilding.html">Building graphs</a>
    </li>
    <li>
      <a href="../articles/NKDE.html">Network Kernel Density Estimate</a>
    </li>
    <li>
      <a href="../articles/NKDEdetailed.html">Details about NKDE</a>
    </li>
    <li>
      <a href="../articles/SpatialWeightMatrices.html">Spatial Weight Matrices</a>
    </li>
    <li>
      <a href="../articles/TNKDE.html">Temporal Network Kernel Density Estimate</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JeremyGelb/spNetwork/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Network cross k and g functions (maturing)</h1>
    <small class="dont-index">Source: <a href='https://github.com/JeremyGelb/spNetwork/blob/master/R/k_functions_sf.R'><code>R/k_functions_sf.R</code></a></small>
    <div class="hidden name"><code>cross_kfunctions.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the cross k and g functions for a set of points on a
  network. (maturing)</p>
    </div>

    <pre class="usage"><span class='fu'>cross_kfunctions</span><span class='op'>(</span>
  <span class='va'>lines</span>,
  <span class='va'>pointsA</span>,
  <span class='va'>pointsB</span>,
  <span class='va'>start</span>,
  <span class='va'>end</span>,
  <span class='va'>step</span>,
  <span class='va'>width</span>,
  <span class='va'>nsim</span>,
  conf_int <span class='op'>=</span> <span class='fl'>0.05</span>,
  digits <span class='op'>=</span> <span class='fl'>2</span>,
  tol <span class='op'>=</span> <span class='fl'>0.1</span>,
  resolution <span class='op'>=</span> <span class='cn'>NULL</span>,
  agg <span class='op'>=</span> <span class='cn'>NULL</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>lines</th>
      <td><p>A feature collection of linestrings representing the underlying network. The
geometries must be simple Linestrings (may crash if some geometries
 are invalid) without MultiLineSring</p></td>
    </tr>
    <tr>
      <th>pointsA</th>
      <td><p>A feature collection of points representing the points to which the
distances are calculated.</p></td>
    </tr>
    <tr>
      <th>pointsB</th>
      <td><p>A feature collection of points representing the points from which
the distances are calculated.</p></td>
    </tr>
    <tr>
      <th>start</th>
      <td><p>A double, the lowest distance used to evaluate the k and g functions</p></td>
    </tr>
    <tr>
      <th>end</th>
      <td><p>A double, the highest distance used to evaluate  the k and g functions</p></td>
    </tr>
    <tr>
      <th>step</th>
      <td><p>A double, the step between two evaluations of the k and g
function. start, end and step are used to create a vector of distances with the function seq</p></td>
    </tr>
    <tr>
      <th>width</th>
      <td><p>The width of each donut for the g-function. Half of the width is applied on
both sides of the considered distance</p></td>
    </tr>
    <tr>
      <th>nsim</th>
      <td><p>An integer indicating the number of Monte Carlo simulations
to perform for inference</p></td>
    </tr>
    <tr>
      <th>conf_int</th>
      <td><p>A double indicating the width confidence interval (default =
0.05) calculated on the Monte Carlo simulations</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>An integer indicating the number of digits to retain from the
spatial coordinates</p></td>
    </tr>
    <tr>
      <th>tol</th>
      <td><p>When adding the points to the network, specify the minimum
distance between these points and the lines' extremities. When points are
closer, they are added at the extremity of the lines</p></td>
    </tr>
    <tr>
      <th>resolution</th>
      <td><p>When simulating random points on the network, selecting a
resolution will reduce greatly the calculation time. When resolution is null
the random points can occur everywhere on the graph. If a value is specified,
the edges are split according to this value and the random points can only be
vertices on the new network</p></td>
    </tr>
    <tr>
      <th>agg</th>
      <td><p>A double indicating if the events must be aggregated within a distance.
If NULL, the events are aggregated only by rounding the coordinates</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>A Boolean indicating if progress messages should be displayed</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with the following values : <br /></p><ul>
<li><p>plotk A
  ggplot2 object representing the values of the cross k-function</p></li>
<li><p>plotg A ggplot2 object representing the values of the cross
  g-function</p></li>
<li><p>values A DataFrame with the values used to build the
  plots</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The cross k-function is a method to characterize the dispersion of a
  set of points (A) around a second set of points (B). For each point in B,
  the numbers of other points in A in subsequent radii are calculated. This
  empirical cross k-function can be more or less clustered than a cross
  k-function obtained if the points in A were randomly located around points
  in B. In a network, the network distance is used instead of the Euclidean
  distance. This function uses Monte Carlo simulations to assess if the
  points are clustered or dispersed and gives the results as a line plot. If
  the line of the observed cross k-function is higher than the shaded area
  representing the values of the simulations, then the points in A are more
  clustered around points in B than what we can expect from randomness and
  vice-versa. The function also calculates the cross g-function, a modified
  version of the cross k-function using rings instead of disks. The width of
  the ring must be chosen. The main interest is to avoid the cumulative
  effect of the classical k-function. Note that the cross k-function of
  points A around B is not necessarily the same as the cross k-function of
  points B around A. This function is maturing, it works as expected (unit
  tests) but will probably be modified in the future releases (gain speed,
  advanced features, etc.).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># \donttest{</span>
<span class='va'>networkgpkg</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"networks.gpkg"</span>, package <span class='op'>=</span> <span class='st'>"spNetwork"</span>, mustWork <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>eventsgpkg</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"events.gpkg"</span>, package <span class='op'>=</span> <span class='st'>"spNetwork"</span>, mustWork <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>main_network_mtl</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='va'>networkgpkg</span>,layer<span class='op'>=</span><span class='st'>"main_network_mtl"</span><span class='op'>)</span>
<span class='va'>mtl_libraries</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='va'>eventsgpkg</span>,layer<span class='op'>=</span><span class='st'>"mtl_libraries"</span><span class='op'>)</span>
<span class='va'>mtl_theatres</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='va'>eventsgpkg</span>,layer<span class='op'>=</span><span class='st'>"mtl_theatres"</span><span class='op'>)</span>
<span class='va'>result</span> <span class='op'>&lt;-</span> <span class='fu'>cross_kfunctions</span><span class='op'>(</span><span class='va'>main_network_mtl</span>, <span class='va'>mtl_theatres</span>, <span class='va'>mtl_libraries</span>,
                           start <span class='op'>=</span> <span class='fl'>0</span>, end <span class='op'>=</span> <span class='fl'>2500</span>, step <span class='op'>=</span> <span class='fl'>10</span>, width <span class='op'>=</span> <span class='fl'>250</span>,
                           nsim <span class='op'>=</span> <span class='fl'>50</span>, conf_int <span class='op'>=</span> <span class='fl'>0.05</span>, digits <span class='op'>=</span> <span class='fl'>2</span>,
                           tol <span class='op'>=</span> <span class='fl'>0.1</span>, agg <span class='op'>=</span> <span class='cn'>NULL</span>, verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='co'># }</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jeremy Gelb.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


